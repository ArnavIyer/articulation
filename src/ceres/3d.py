import matplotlib.pyplot as plt
import sys

y = [-8.30954e-06,-0.000654606,-0.00186346,-0.000998676,-0.00140249,-0.000199983,-3.90622e-05,0.000167911,-0.000419486,0.000153611,0.00125596,0.00138891,0.00163607,0.00145989,0.000501771,0.00102292,0.000181037,6.7291e-05,0.000883333,0.000682023,0.000722711,0.00117347,0.00183002,0.00137855,0.00212236,0.00226227,0.00262815,0.00227496,0.00245487,0.00247633,0.00233745,0.00259435,0.00175167,0.00165149,0.000413789,0.000285216,-9.90548e-05,-3.19519e-05,0.000869144,0.00135637,2.65573e-05,-0.000962602,-0.000871863,-0.000989976,-0.00302842,-0.0038591,-0.00715728,-0.0218203,-0.0294401,-0.0413089,-0.0498023,-0.0777237,-0.0924077,-0.108775,-0.119364,-0.136263,-0.166637,-0.183027,-0.206894,-0.21943,-0.253196,-0.274565,-0.28877,-0.301688,-0.330044,-0.344425,-0.358641,-0.371632,-0.382722,-0.400917,-0.415188,-0.425766,-0.424853,-0.422926,-0.422231,-0.429531,-0.427483,-0.425437,-0.42648,-0.423765,-0.420587,-0.411578,-0.404622,-0.39741,-0.38664,-0.378197,-0.367905,-0.344098,-0.333206,-0.320398,-0.29568,-0.281041,-0.270126,-0.237985,-0.232419,-0.210036,-0.187646,-0.168505,-0.145749,-0.143118,-0.125543,-0.109469,-0.097952,-0.083315,-0.0783524,-0.0594113,-0.0582058,-0.0499904,-0.0415504,-0.0316992,-0.0276875,-0.0206798,-0.0162198,-0.0101242,-0.00918059,-0.00455193,-0.00422916,-0.000551375,-0.00131475,-0.00176004,-0.00228255,-0.00185124,-0.00322617,-0.00521261,-0.008681,-0.0165461,-0.0254274,-0.0372389,-0.0423207,-0.0506758,-0.0607338,-0.07468,-0.0828905,-0.096995,-0.109489,-0.117095,-0.127896,-0.143675,-0.165729,-0.183356,-0.207047,-0.218908,-0.22514,-0.230593,-0.245522,-0.263589,-0.275924,-0.292509,-0.307453,-0.322485,-0.345518,-0.365949,-0.382489,-0.388294,-0.387245,-0.38285,-0.368207,-0.350658,-0.329835,-0.308936,-0.288074,-0.268821,-0.249958,-0.232216,-0.216698,-0.186328,-0.172617,-0.150078,-0.134654,-0.111639,-0.0900296,-0.0739882,-0.0615754,-0.0459697,-0.0313196,-0.0153597,-0.00622748]
x = [2.24346,2.29044,2.32625,2.38199,2.44997,2.47788,2.52634,2.57885,2.62754,2.67733,2.73179,2.78453,2.82691,2.87593,2.92724,2.97805,3.05623,3.08756,3.13573,3.18967,3.23412,3.28499,3.3347,3.39196,3.43623,3.48397,3.5368,3.58394,3.63908,3.68334,3.73534,3.78435,3.83623,3.88511,3.93726,3.99049,4.03509,4.08424,4.13329,4.18521,4.2358,4.31173,4.34165,4.41119,4.44185,4.49789,4.5417,4.5912,4.64138,4.6932,4.74654,4.79175,4.8407,4.90112,4.94614,4.99421,5.04153,5.09283,5.14221,5.19738,5.24102,5.29025,5.34307,5.39723,5.43983,5.4898,5.56494,5.60432,5.65537,5.699,5.76277,5.7985,5.85402,5.90441,5.95194,5.9998,6.0479,6.09876,6.14855,6.19983,6.26173,6.30405,6.35379,6.41054,6.453,6.50287,6.5604,6.60348,6.65352,6.71075,6.75751,6.80725,6.86051,6.91006,6.96009,7.01298,7.06298,7.11923,7.1695,7.21973,7.27534,7.32933,7.38633,7.43867,7.49653,7.55345,7.60817,7.66358,7.71841,7.77494,7.83526,7.89414,7.95438,8.01273,8.07298,8.13214,8.19012,8.25008,8.3117,8.37156,8.43468,8.49749,8.5595,8.62881,8.70287,8.76955,8.83969,8.90489,8.98043,9.05243,9.12816,9.20041,9.28231,9.36624,9.44405,9.52077,9.6019,9.69034,9.77914,9.87101,9.95805,10.0386,10.1287,10.2131,10.3022,10.3886,10.4783,10.5669,10.6649,10.7631,10.879,10.9874,11.0849,11.1915,11.2887,11.4016,11.5159,11.6332,11.7458,11.8508,11.9547,12.067,12.1818,12.3019,12.4246,12.5489,12.6749,12.7898,12.9163,13.0432,13.1838,13.3059,13.4362,13.5657,13.6881,13.8361,13.959]

fig2 = plt.figure()
ax = fig2.add_subplot()

ax.plot(x, y, color='red')
# ax.plot(x2, y2, color='green')

ax.set_xlabel("Time (s)")
ax.set_ylabel("State (m)")
plt.title("Prismatic State Optimization")
plt.show()

y = [-1.97352e-05,-0.00109867,-0.000193844,0.00020756,0.000319012,0.00180021,0.00179271,0.000842585,0.000130311,0.000910976,0.00117679,0.00174174,0.00211623,0.00288329,0.00305959,0.00279708,0.00207788,0.000557165,0.000798833,0.00111848,0.000288982,-0.000698803,-0.00361857,-0.0127273,-0.0290005,-0.0641275,-0.091904,-0.118041,-0.165119,-0.217699,-0.251255,-0.29959,-0.328091,-0.357003,-0.38853,-0.413456,-0.420571,-0.427605,-0.425626,-0.424629,-0.413837,-0.402879,-0.384716,-0.353294,-0.331454,-0.293952,-0.255747,-0.230575,-0.185809,-0.144366,-0.124562,-0.097145,-0.0780426,-0.0589875,-0.050566,-0.0310541,-0.0234989,-0.0126817,-0.00910123,-0.0042755,-7.61702e-05,-0.00180697,-0.00149908,-0.00300265,-0.0083422,-0.0161174,-0.0308169,-0.041966,-0.0502369,-0.0665729,-0.0767271,-0.0963754,-0.112697,-0.124988,-0.1427,-0.153834,-0.181833,-0.205518,-0.217061,-0.2357,-0.238287,-0.250152,-0.273994,-0.290888,-0.305685,-0.329219,-0.343466,-0.363805,-0.37638,-0.386301,-0.386247,-0.382866,-0.372117,-0.354437,-0.340781,-0.321535,-0.307006,-0.286011,-0.26711,-0.253754,-0.236036,-0.219927,-0.205571,-0.184853,-0.171309,-0.152353,-0.134695,-0.119683,-0.110319,-0.0893323,-0.082404,-0.0634865,-0.0605366,-0.0458522,-0.0308328,-0.0244871,-0.0120777,-0.00595645]
x = [2.04504,2.13693,2.2313,2.33098,2.43129,2.56352,2.62572,2.73647,2.83267,2.93346,3.03702,3.13052,3.23403,3.32992,3.43603,3.53196,3.63597,3.73024,3.83573,3.94072,4.03485,4.1342,4.23091,4.33911,4.4383,4.53084,4.63969,4.73631,4.83544,4.96072,5.05797,5.12936,5.23534,5.33327,5.43795,5.53332,5.62973,5.73531,5.83398,5.93756,6.02877,6.13224,6.23041,6.3295,6.43308,6.52994,6.63295,6.73913,6.83275,6.93292,7.03424,7.13132,7.23112,7.33205,7.43622,7.52912,7.63645,7.73081,7.83727,7.93764,8.03242,8.13598,8.23198,8.33182,8.43066,8.53845,8.62989,8.73311,8.83525,8.92907,9.0566,9.12964,9.23196,9.33476,9.43288,9.53248,9.62903,9.73515,9.8358,9.93883,10.0411,10.1302,10.2404,10.3295,10.4308,10.5304,10.636,10.754,10.8296,10.9302,11.0345,11.1424,11.2306,11.3291,11.4314,11.528,11.627,11.7315,11.8274,11.9315,12.0286,12.1324,12.2269,12.3306,12.4472,12.5302,12.6331,12.7305,12.8344,12.9354,13.0298,13.1308,13.2294,13.3322,13.4529,13.5328,13.6527,13.7244]

fig3 = plt.figure()
ax = fig3.add_subplot()

ax.plot(x, y, color='red')

ax.set_xlabel("Time (s)")
ax.set_ylabel("State (m)")
plt.title("Prismatic State Optimization")
plt.show()

import math
# revolute stuff
y = [-0.00309979,-0.00185277,-0.00331922,-0.00270749,-0.000654004,-0.00507889,0.00502535,0.0163461,0.0439661,0.0667988,0.0972312,0.117381,0.15281,0.19109,0.213412,0.254325,0.276421,0.317038,0.355088,0.373655,0.408237,0.428265,0.463927,0.484831,0.532425,0.564202,0.617051,0.677285,0.710537,0.76582,0.791942,0.845188,0.868798,0.910769,0.948328,0.963769,0.995657,1.01004,1.04074,1.07113,1.08227,1.11231,1.14044,1.16983,1.20179,1.23531,1.24853,-1.86137,1.33687,1.38795,1.41374,1.47153,1.50801,1.53424,-1.5993,1.52178,1.48913,-1.75605,1.31571,1.28541,1.24977,1.21149,1.18185,1.15938,1.12244,1.10072,1.06706,1.02792,1.00422,0.961534,0.931677,0.884792,0.852763,0.827575,0.790957,0.769803,0.752866,0.726342,0.707325,0.678454,0.658736,0.621508,0.593999,0.548039,0.490013,0.44584,0.383915,0.363031,0.337902,0.309884,0.288963,0.251023,0.221708,0.196259,0.17676,0.14289,0.130347,0.106883,0.0860018,0.0668661,0.0489523,0.0174948,-0.00104642,-0.0101949,-0.0110195,-0.00767187,-0.00424105,-0.00873669,-0.00511509,-0.00814761,-0.0100482,-0.0048226,-0.00548413,-0.0059355,-0.00654073,-0.00870061,-0.0088298,-0.008676,-0.0109447,-0.00782714,-0.00685516,-0.00550991,-0.0106873,-0.00661362,-0.00750123,-0.0070076,-0.00738131,-0.0109072]
y = [i / math.pi * 180 for i in y]
x = [ 2.3936,2.43736,2.48045,2.53037,2.58254,2.62887,2.68366,2.72931,2.78043,2.83204,2.87918,2.93317,2.97994,3.03027,3.08591,3.12807,3.18203,3.23504,3.28081,3.33694,3.38194,3.43214,3.48244,3.53555,3.58067,3.63512,3.68158,3.73217,3.78657,3.83142,3.88752,3.93444,3.98477,4.03752,4.08673,4.14579,4.19202,4.24316,4.2932,4.34621,4.40037,4.45319,4.50962,4.56609,4.62661,4.68135,4.73957,4.80332,4.90839,5.01251,5.09168,5.22647,5.33502,5.44484,5.58738,5.73346,5.81747,5.9953,6.1036,6.16704,6.23076,6.33134,6.39945,6.47455,6.54116,6.62995,6.70402,6.78605,6.86876,6.9513,7.02401,7.09823,7.16663,7.2394,7.31317,7.3834,7.45855,7.53113,7.60538,7.68285,7.75941,7.83788,7.91996,8.01232,8.09322,8.17174,8.25271,8.33543,8.41192,8.49425,8.57335,8.66136,8.75033,8.83423,8.93727,9.0439,9.13319,9.22737,9.32288,9.41725,9.51039,9.60339,9.70016,9.79365,9.88911,10.0221,10.1163,10.1888,10.2662,10.3919,10.4735,10.6129,10.6958,10.7875,10.8723,10.9612,11.076,11.1724,11.2928,11.4035,11.4866,11.5751,11.6705,11.7718,11.8726,11.9684,12.1014,12.1795]
figrev = plt.figure()

ax = figrev.add_subplot()
a33, = ax.plot(x, y, color="green", label='33 p/frame')
ax.set_xlabel("Video Frame")
ax.set_ylabel("Theta (deg)")
plt.title("Revolute State Optimization")
plt.show()
# sys.exit()

# point cloud vis

fig = plt.figure()
ax = fig.add_subplot(projection='3d')

file = open("/home/arnav/biswas/articulation/rev160.csv", "r")


def in_range(data, i):
    return (data[i][0] > 0.4 and data[i][0] < 0.9) and (
        data[i][1] > -0.19 and data[i][1] < 0.05) and (data[i][2] > 0
                                                      and data[i][2] < 0.6)


data = [[
    float(i.split(",")[0]),
    float(i.split(",")[1]),
    float(i.split(",")[2])
] for i in file.readlines()]

xs = [
    data[i][0] for i in range(len(data)) if i % 500 == 0 and in_range(data, i)
]

ys = [
    data[i][1] for i in range(len(data)) if i % 500 == 0 and in_range(data, i)
]

zs = [
    data[i][2] for i in range(len(data)) if i % 500 == 0 and in_range(data, i)
]

xsa = [
    data[i][0] for i in range(len(data))
    if i % 500 == 0 and not in_range(data, i)
]

ysa = [
    data[i][1] for i in range(len(data))
    if i % 500 == 0 and not in_range(data, i)
]

zsa = [
    data[i][2] for i in range(len(data))
    if i % 500 == 0 and not in_range(data, i)
]

print(len(xs))

ax.scatter(xs, ys, zs)
ax.scatter(xsa, ysa, zsa)
ax.scatter([0], [0], [0])
ax.set_xlabel('X Label')
ax.set_ylabel('Y Label')
ax.set_zlabel('Z Label')
plt.show()
